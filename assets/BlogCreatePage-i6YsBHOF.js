import{r as t,j as e}from"./react-C3EGSwTV.js";import{f as I,g as F,h as R,t as k,i as W,A as y,F as r,m as s,U as T,j as U,I as $,k as V,l as M,n as G,B as C,a as d,o as q,p as z}from"./app-routes-28GHaKxN.js";import{b as O,B as H}from"./BlogFilter-BUdvP_rE.js";import{S as Q,M as K,T as Z}from"./TagsInput-DTqHf0Sd.js";import{A as J,a as X}from"./AttachFileContainerItems-DJBKzQbF.js";import{L as Y,a as ee}from"./LoadImageBlockWithoutLoading_types-COcDz9Xl.js";import{U as te}from"./index-nEH4lVQK.js";import{U as ae}from"./UseDebounce-B4wZPC3r.js";import{I as oe,T as re}from"./TransitionBetweenBlocks-DnqyYarQ.js";import"./@babel-13fjUkWY.js";import"./react-dom-DdwdgRbM.js";import"./@reduxjs-C6AI0MYz.js";import"./redux-DITMfSWq.js";import"./immer-fBqQtvEc.js";import"./redux-thunk-ClJT1hhx.js";import"./reselect-C27TLnWV.js";import"./react-redux-DCb0tGWe.js";import"./use-sync-external-store-CggUjcbj.js";import"./styled-components-BI2Cnmee.js";import"./react-router-dom-BGdsm6zk.js";import"./react-router-DjnSpTaD.js";import"./@remix-run-I3CLtn5C.js";import"./primereact-CKVv_CF4.js";import"./chart.js-DKcZzhFa.js";import"./@kurkle-BZxJdD1U.js";import"./react-chartjs-2-CU1aPWW1.js";import"./@mui-DMlcxK31.js";import"./react-is-DcfIKM1A.js";import"./clsx-B-dksMZM.js";import"./@emotion-DvcORr5z.js";import"./hoist-non-react-statics-BzqkPicg.js";import"./stylis-FDnFs_-n.js";import"./react-transition-group-CP2SRup2.js";import"./jss-plugin-rule-value-function-NRMjr7SR.js";import"./jss-C2YbWCDG.js";import"./is-in-browser-I-S1O4Zl.js";import"./jss-plugin-global-B2s_qxL_.js";import"./jss-plugin-nested-CvQgPwbz.js";import"./jss-plugin-camel-case-B3itHn0h.js";import"./hyphenate-style-name-HOLnhz8K.js";import"./jss-plugin-default-unit-CakodQBr.js";import"./jss-plugin-vendor-prefixer-C0RmQ0NR.js";import"./css-vendor-BK3-fMEt.js";import"./jss-plugin-props-sort-D2CdvUsV.js";import"./react-select-CFGMc7l-.js";import"./@floating-ui-RYOEkms0.js";import"./use-isomorphic-layout-effect-CaxrrJkV.js";import"./memoize-one-BdPwpGay.js";import"./swiper--iI3_9IR.js";import"./BackSVG-ggoUkx1I.js";import"./BlogFilterAdaptiveSVG-DRPIsXXu.js";import"./react-quill-new-BekiOLBF.js";import"./lodash-Bzo2tTgf.js";import"./quill-CX5mxdj9.js";import"./parchment-Crftfyop.js";import"./quill-delta-BfDkC5Jv.js";import"./fast-diff-Az_-rVRq.js";import"./lodash.clonedeep-DKoaPdoj.js";import"./lodash.isequal-DxbEemmG.js";import"./eventemitter3-DwnVOMR6.js";import"./lodash-es-BKPNmaDy.js";const se="_BlogCreatePageContainer_1n9lh_3",ne="_BlogCreatePageContainer__img_1n9lh_8",ie="_BlogCreatePageContainer__category_1n9lh_22",le="_BlogCreatePageContainer__postType_1n9lh_32",ge="_BlogCreatePageContainer__postType__svg_1n9lh_47",_e="_BlogCreatePageContainer__postType__svg__active_1n9lh_58",ce="_BlogCreatePageContainer__postType__text_1n9lh_61",pe="_BlogCreatePageContainer__postType__text__active_1n9lh_73",me="_BlogCreatePageContainer__desc_1n9lh_76",Ce="_BlogCreatePageContainer__titleInput_1n9lh_100",de="_BlogCreatePageContainer__load_1n9lh_122",ue="_BlogCreatePageContainer__inputWrapper_1n9lh_125",Be="_BlogCreatePageContainer__username_1n9lh_128",Pe="_BlogCreatePageContainer__button_1n9lh_138",xe="_BlogCreatePageContainer__footerDesc_1n9lh_154",he="_BlogCreatePageContainer__redArrowRightSvg_1n9lh_179",a={BlogCreatePageContainer:se,BlogCreatePageContainer__img:ne,BlogCreatePageContainer__category:ie,BlogCreatePageContainer__postType:le,BlogCreatePageContainer__postType__svg:ge,BlogCreatePageContainer__postType__svg__active:_e,BlogCreatePageContainer__postType__text:ce,BlogCreatePageContainer__postType__text__active:pe,BlogCreatePageContainer__desc:me,BlogCreatePageContainer__titleInput:Ce,BlogCreatePageContainer__load:de,BlogCreatePageContainer__inputWrapper:ue,BlogCreatePageContainer__username:Be,BlogCreatePageContainer__button:Pe,BlogCreatePageContainer__footerDesc:xe,BlogCreatePageContainer__redArrowRightSvg:he},je=_=>t.createElement("svg",{width:10,height:18,viewBox:"0 0 10 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",..._},t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.337951 17.6562C-0.112651 17.1977 -0.112651 16.4544 0.337951 15.996L7.21433 8.99998L0.337951 2.00391C-0.112651 1.54546 -0.112651 0.802292 0.337951 0.34384C0.788553 -0.114615 1.51908 -0.114615 1.9697 0.34384L9.66204 8.16995C10.1127 8.6284 10.1127 9.37157 9.66204 9.83002L1.9697 17.6562C1.51908 18.1146 0.788553 18.1146 0.337951 17.6562Z",fill:"#FF5555"})),Ie=t.memo(()=>{const{setSelectedPostType:_,selectedPostType:c}=t.useContext(I),n=F(R.GET),[l,p]=t.useState(n?n.title:""),[i,A]=t.useState(n?n.textareaValue:""),v=t.useRef(null),[f,u]=t.useState([]),[L,S]=t.useState(0),[m,D]=t.useState(n?n.tags:[]),{setCreatePostActiveStep:b}=t.useContext(I),[N,w]=te(),B=t.useMemo(()=>!!l,[l]),P=t.useMemo(()=>!!i,[i]),E=t.useCallback(()=>{if(!B||!P){const o=document.getElementById("BlogCreatePageContainer__blogCreatePagePostTypes");return o==null||o.scrollIntoView({behavior:"smooth"}),w(!0)}b("Пост создан"),setTimeout(()=>{document.getElementById("BlogPostIsCreated").scrollIntoView({behavior:"smooth"})},k)},[P,B,b,w]),x=t.useCallback(ae(o=>{F(R.UPDATE,o)},1e3),[]),h=t.useRef(),j=t.useMemo(()=>W.find(o=>o.route==y.BLOG_CREATE).name,[]);return e.jsx(oe,{setFiles:u,indexedDB:h,indexedDBStoreName:j,children:e.jsxs(r,{direction:"column",gap:s?"5":"10",className:a.BlogCreatePageContainer,children:[e.jsxs(r,{gap:s?"5":"15",align:"center",children:[e.jsx("img",{className:a.BlogCreatePageContainer__img,src:`${T}/global/images/serviceExample_img_2.png`,alt:"Изображение автора поста"}),e.jsxs(r,{align:"center",gap:s?"5":"10",children:[e.jsx("span",{className:a.BlogCreatePageContainer__category,children:"Владелец канала"}),e.jsx(je,{className:a.BlogCreatePageContainer__redArrowRightSvg})]})]}),e.jsx(r,{align:"center",gap:s?"5":"10",children:U.map(o=>e.jsxs(r,{id:"BlogCreatePageContainer__blogCreatePagePostTypes",className:`${a.BlogCreatePageContainer__postType}
            ${c==o?a.BlogCreatePageContainer__postType__active:""} `,align:"center",gap:"5",onClick:()=>_(o),children:[e.jsx(Q,{className:`${a.BlogCreatePageContainer__postType__svg}
            ${c==o?a.BlogCreatePageContainer__postType__svg__active:""} `}),e.jsx("span",{className:`${a.BlogCreatePageContainer__postType__text}
            ${c==o?a.BlogCreatePageContainer__postType__text__active:""} `,children:o})]},o))}),e.jsxs("p",{className:a.BlogCreatePageContainer__desc,children:["Вы можете написать текст на любую интересную вам тему. Но сначала прочитайте наши"," ",e.jsx("a",{href:"https://journal.tinkoff.ru/community-rules/",children:"правила публикации."})," ","После модерации текст появится"," ",e.jsx("a",{href:"https://journal.tinkoff.ru/community/",children:"в Сообществе"})," и в вашем личном профиле."]}),e.jsxs(r,{max:!0,direction:"column",gap:s.matches?"0":"20",children:[e.jsx($,{className:a.BlogCreatePageContainer__titleInput,placeholder:"Заголовок",value:l,onChange:o=>{p(o.target.value),x({title:o.target.value,textareaValue:i,tags:m})},type:"text",isWarn:N&&!B}),e.jsx(K,{TextareaValue:i,setTextareaValue:A,onChange:()=>{x({title:l,textareaValue:i,tags:m})},minSymbolsAmount:100,maxSymbolsAmount:500,placeholder:"Ваш текст поста...",isWarn:N&&!P}),e.jsxs(r,{max:!0,gap:"10",direction:"column",children:[e.jsxs(r,{max:!0,gap:"10",direction:"column",children:[e.jsxs(r,{max:!0,direction:"column",className:a.BlogCreatePageContainer__inputWrapper,children:[e.jsx(J,{inputRef:v,InputFiles:f,setInputFiles:u,setInputFileProgress:S,accept:"image/png, image/gif, image/jpeg, image/jpg",indexedDB:h.current,indexedDBStoreName:j}),e.jsx(Y,{className:a.BlogCreatePageContainer__load,size:ee.BIG,inputRef:v,withBG:!1,title:"Загрузите изображение",isHovered:!0})]}),e.jsx(X,{setInputFileProgress:S,InputFileProgress:L,setInputFiles:u,files:f,fileView:"medium",indexedDBName:V,indexedDBStore:j,indexedDB:h.current})]}),e.jsx(Z,{setSelectedTags:D,SelectedTags:m,onChange:()=>{x({title:l,textareaValue:i,tags:m})}})]})]}),e.jsxs(r,{max:!0,justify:"between",align:"center",direction:s.matches?"column":"row",children:[e.jsxs(r,{max:!0,align:"center",gap:s?"5":"10",children:[e.jsx(M,{imgURL:`${T}/global/images/serviceExample_authorImg.png`,imgSize:G.SMALLER}),e.jsx("span",{className:a.BlogCreatePageContainer__username,children:"Roman Bayandin-Bessonov"})]}),e.jsxs(r,{max:!0,align:"center",justify:s.matches?"end":"center",gap:"10",children:[e.jsx(C,{className:a.BlogCreatePageContainer__button,text:"Сохранить черновик",type:d.BLACK_WITHOUT_OUTLINE}),e.jsx(C,{onClick:E,className:a.BlogCreatePageContainer__button,text:"Опубликовать",type:d.RED})]})]}),e.jsxs("p",{className:a.BlogCreatePageContainer__footerDesc,children:["Нажимая «Опубликовать», вы принимаете"," ",e.jsx("a",{href:"https://journal.tinkoff.ru/wiki/terms/",children:"условия соглашения"})," ","и"," ",e.jsx("a",{href:"https://journal.tinkoff.ru/wiki/privacy/",children:"политику конфиденциальности"})]})]})})}),ye="_BlogPostIsCreated_4wnqr_3",Te="_BlogPostIsCreated__img_4wnqr_24",ve="_BlogPostIsCreated__caption_4wnqr_29",fe="_BlogPostIsCreated__desc_4wnqr_39",Se="_BlogPostIsCreated__button_4wnqr_51",g={BlogPostIsCreated:ye,BlogPostIsCreated__img:Te,BlogPostIsCreated__caption:ve,BlogPostIsCreated__desc:fe,BlogPostIsCreated__button:Se},be=t.memo(()=>e.jsx(e.Fragment,{children:e.jsxs(r,{max:!0,gap:"20",align:"center",justify:"center",direction:"column",className:`${g.BlogPostIsCreated} Page__GrayBorderWithWhiteBGWrapper`,children:[e.jsx("img",{className:g.BlogPostIsCreated__img,src:`${T}/BlogPage/PostIsPublished_img.jpg`,alt:"Пост опубликован"}),e.jsx("h1",{className:g.BlogPostIsCreated__caption,children:"Пост опубликован!"}),e.jsx("p",{className:g.BlogPostIsCreated__desc,children:"Пост будет отображаться в вашем профиле, прочая дополнительная, полезная информация или какое-то предупреждение"}),e.jsxs(r,{align:"center",gap:s.matches?"10":"15",children:[e.jsx(C,{className:g.BlogPostIsCreated__button,to:y.BLOG,type:d.BLUE,text:"На главную"}),e.jsx(C,{className:g.BlogPostIsCreated__button,to:y.USER,type:d.RED,text:"В профиль"})]})]})})),Et=t.memo(()=>{t.useEffect(()=>{document.querySelector("html").classList.add("BlogCreatePage"),document.title="TeleWorks | Создание поста"},[]);const[_,c]=t.useState(O[0]),[n,l]=t.useState("Пост"),[p,i]=t.useState("Создание поста");return e.jsx(I.Provider,{value:{selectedPostType:n,setSelectedPostType:l,CreatePostActiveStep:p,setCreatePostActiveStep:i},children:e.jsx("main",{className:"Page BlogCreatePage__main",children:e.jsxs("div",{className:"padding",children:[e.jsx("div",{style:{opacity:0,position:"absolute",top:q.matches?"50vh":"0"},id:"BlogPostIsCreated"}),e.jsx(r,{max:!0,className:"BlogCreatePage__contentWrapper",children:e.jsx(re,{className:"BlogCreatePage__contentWrapper",blocks:[{component:e.jsxs("div",{className:"BlogCreatePage__container",children:[e.jsx(H,{selectedCategory:_,setSelectedCategory:c,canReturn:!0}),e.jsx(r,{className:"BlogCreatePage__mainWrapper",direction:"column",gap:"20",children:e.jsx(Ie,{})})]}),condition:p=="Создание поста",id:0},{component:e.jsx(be,{}),condition:p=="Пост создан",id:1}],transitionDuration:z,defaultIndex:0})})]})})})});export{Et as BlogCreatePage};
