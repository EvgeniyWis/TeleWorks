import{r as t,j as e}from"./react-C3EGSwTV.js";import{F as a,m as l,b as $,t as V,I as G,A as I,U as v,c as q,d as O,e as z,f as H,B as d,g as B,h as K,i as Q,L as Z}from"./app-routes-BSHQV9D7.js";import{b as J,B as X}from"./BlogFilter-Cx858O8b.js";import{S as Y,M as ee,T as te}from"./ChangeSVG-B245vfxF.js";import{A as ae,a as oe}from"./AttachFileContainerFile-C-haJJ1H.js";import{L as se,a as re}from"./LoadImageBlockWithoutLoading_types-Bv2wBRmE.js";import{U as A,a as ne}from"./UseLocalStorage-Y7eeG9MN.js";import{U as ie}from"./UseDebounce-B4wZPC3r.js";import{I as le,T as ge}from"./TransitionBetweenBlocks-B166YkNH.js";import"./@babel-13fjUkWY.js";import"./react-dom-DdwdgRbM.js";import"./primereact-CKVv_CF4.js";import"./chart.js-DKcZzhFa.js";import"./@kurkle-BZxJdD1U.js";import"./react-chartjs-2-CU1aPWW1.js";import"./@mui-DMlcxK31.js";import"./react-is-DcfIKM1A.js";import"./clsx-B-dksMZM.js";import"./@emotion-DvcORr5z.js";import"./hoist-non-react-statics-BzqkPicg.js";import"./stylis-FDnFs_-n.js";import"./react-transition-group-CP2SRup2.js";import"./jss-plugin-rule-value-function-NRMjr7SR.js";import"./jss-C2YbWCDG.js";import"./is-in-browser-I-S1O4Zl.js";import"./jss-plugin-global-B2s_qxL_.js";import"./jss-plugin-nested-CvQgPwbz.js";import"./jss-plugin-camel-case-B3itHn0h.js";import"./hyphenate-style-name-HOLnhz8K.js";import"./jss-plugin-default-unit-CakodQBr.js";import"./jss-plugin-vendor-prefixer-C0RmQ0NR.js";import"./css-vendor-BK3-fMEt.js";import"./jss-plugin-props-sort-D2CdvUsV.js";import"./react-router-dom-BGdsm6zk.js";import"./react-router-DjnSpTaD.js";import"./@remix-run-I3CLtn5C.js";import"./react-select-CFGMc7l-.js";import"./@floating-ui-RYOEkms0.js";import"./use-isomorphic-layout-effect-CaxrrJkV.js";import"./memoize-one-BdPwpGay.js";import"./swiper--iI3_9IR.js";import"./styled-components-BI2Cnmee.js";import"./BackSVG-ggoUkx1I.js";import"./BlogFilterAdaptiveSVG-DRPIsXXu.js";import"./react-quill-new-BekiOLBF.js";import"./lodash-Bzo2tTgf.js";import"./quill-CX5mxdj9.js";import"./parchment-Crftfyop.js";import"./quill-delta-BfDkC5Jv.js";import"./fast-diff-Az_-rVRq.js";import"./lodash.clonedeep-DKoaPdoj.js";import"./lodash.isequal-DxbEemmG.js";import"./eventemitter3-DwnVOMR6.js";import"./lodash-es-BKPNmaDy.js";const _e="_BlogCreatePageContainer_11x1n_3",ce="_BlogCreatePageContainer__img_11x1n_8",pe="_BlogCreatePageContainer__category_11x1n_22",me="_BlogCreatePageContainer__desc_11x1n_32",Ce="_BlogCreatePageContainer__titleInput_11x1n_56",Pe="_BlogCreatePageContainer__load_11x1n_78",de="_BlogCreatePageContainer__inputWrapper_11x1n_81",Be="_BlogCreatePageContainer__username_11x1n_84",ue="_BlogCreatePageContainer__button_11x1n_94",xe="_BlogCreatePageContainer__footerDesc_11x1n_110",ye="_BlogCreatePageContainer__redArrowRightSvg_11x1n_135",r={BlogCreatePageContainer:_e,BlogCreatePageContainer__img:ce,BlogCreatePageContainer__category:pe,BlogCreatePageContainer__desc:me,BlogCreatePageContainer__titleInput:Ce,BlogCreatePageContainer__load:Pe,BlogCreatePageContainer__inputWrapper:de,BlogCreatePageContainer__username:Be,BlogCreatePageContainer__button:ue,BlogCreatePageContainer__footerDesc:xe,BlogCreatePageContainer__redArrowRightSvg:ye},he=o=>t.createElement("svg",{width:10,height:18,viewBox:"0 0 10 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...o},t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.337951 17.6562C-0.112651 17.1977 -0.112651 16.4544 0.337951 15.996L7.21433 8.99998L0.337951 2.00391C-0.112651 1.54546 -0.112651 0.802292 0.337951 0.34384C0.788553 -0.114615 1.51908 -0.114615 1.9697 0.34384L9.66204 8.16995C10.1127 8.6284 10.1127 9.37157 9.66204 9.83002L1.9697 17.6562C1.51908 18.1146 0.788553 18.1146 0.337951 17.6562Z",fill:"#FF5555"})),Te="_BlogCreatePagePostTypes__postType_1w7cm_3",je="_BlogCreatePagePostTypes__postType__svg_1w7cm_18",Ie="_BlogCreatePagePostTypes__postType__svg__active_1w7cm_29",ve="_BlogCreatePagePostTypes__postType__text_1w7cm_32",Se="_BlogCreatePagePostTypes__postType__text__active_1w7cm_44",_={BlogCreatePagePostTypes__postType:Te,BlogCreatePagePostTypes__postType__svg:je,BlogCreatePagePostTypes__postType__svg__active:Ie,BlogCreatePagePostTypes__postType__text:ve,BlogCreatePagePostTypes__postType__text__active:Se},F=t.memo(()=>{const{setSelectedPostType:o,selectedPostType:s}=t.useContext(S);return e.jsx(a,{align:"center",gap:l?"5":"10",children:Ae.map(n=>e.jsxs(a,{id:"BlogCreatePageContainer__blogCreatePagePostTypes",className:`${_.BlogCreatePagePostTypes__postType}
            ${s==n?_.BlogCreatePagePostTypes__postType__active:""} `,align:"center",gap:"5",onClick:()=>o(n),children:[e.jsx(Y,{className:`${_.BlogCreatePagePostTypes__postType__svg}
            ${s==n?_.BlogCreatePagePostTypes__postType__svg__active:""} `}),e.jsx("span",{className:`${_.BlogCreatePagePostTypes__postType__text}
            ${s==n?_.BlogCreatePagePostTypes__postType__text__active:""} `,children:n})]},n))})});F.displayName="BlogCreatePagePostTypes";const M=t.memo(()=>{const o=R(A.GET),[s,n]=t.useState(o?o.title:""),[g,p]=t.useState(o?o.textareaValue:""),m=t.useRef(null),[f,u]=t.useState([]),[W,N]=t.useState(0),[C,k]=t.useState(o?o.tags:[]),{setCreatePostActiveStep:b}=t.useContext(S),[w,L]=$(),x=t.useMemo(()=>!!s,[s]),y=t.useMemo(()=>!!g,[g]),U=t.useCallback(()=>{if(!x||!y){const i=document.getElementById("BlogCreatePageContainer__blogCreatePagePostTypes");return i==null||i.scrollIntoView({behavior:"smooth"}),L(!0)}b("Пост создан"),setTimeout(()=>{document.getElementById("BlogPostIsCreated").scrollIntoView({behavior:"smooth"})},V)},[y,x,b,L]),h=t.useCallback(ie(i=>{R(A.UPDATE,i)},1e3),[]),T=t.useRef(),j=t.useMemo(()=>G.find(i=>i.route==I.BLOG_CREATE()).name,[]);return e.jsx(le,{setFiles:u,indexedDB:T,indexedDBStoreName:j,children:e.jsxs(a,{direction:"column",gap:l?"5":"10",className:r.BlogCreatePageContainer,children:[e.jsxs(a,{gap:l?"5":"15",align:"center",children:[e.jsx("img",{className:r.BlogCreatePageContainer__img,src:`${v}/global/images/serviceExample_img_2.png`,alt:"Изображение автора поста"}),e.jsxs(a,{align:"center",gap:l?"5":"10",children:[e.jsx("span",{className:r.BlogCreatePageContainer__category,children:"Владелец канала"}),e.jsx(he,{className:r.BlogCreatePageContainer__redArrowRightSvg})]})]}),e.jsx(F,{}),e.jsxs("p",{className:r.BlogCreatePageContainer__desc,children:["Вы можете написать текст на любую интересную вам тему. Но сначала прочитайте наши"," ",e.jsx("a",{href:"https://journal.tinkoff.ru/community-rules/",children:"правила публикации."})," ","После модерации текст появится"," ",e.jsx("a",{href:"https://journal.tinkoff.ru/community/",children:"в Сообществе"})," и в вашем личном профиле."]}),e.jsxs(a,{max:!0,direction:"column",gap:l.matches?"0":"20",children:[e.jsx(q,{className:r.BlogCreatePageContainer__titleInput,placeholder:"Заголовок",value:s,onChange:i=>{n(i.target.value),h({title:i.target.value,textareaValue:g,tags:C})},type:"text",isWarn:w&&!x}),e.jsx(ee,{TextareaValue:g,setTextareaValue:p,onChange:()=>{h({title:s,textareaValue:g,tags:C})},minSymbolsAmount:100,maxSymbolsAmount:500,placeholder:"Ваш текст поста...",isWarn:w&&!y}),e.jsxs(a,{max:!0,gap:"10",direction:"column",children:[e.jsxs(a,{max:!0,gap:"10",direction:"column",children:[e.jsxs(a,{max:!0,direction:"column",className:r.BlogCreatePageContainer__inputWrapper,children:[e.jsx(ae,{inputRef:m,InputFiles:f,setInputFiles:u,setInputFileProgress:N,accept:"image/png, image/gif, image/jpeg, image/jpg",indexedDB:T.current,indexedDBStoreName:j}),e.jsx(se,{className:r.BlogCreatePageContainer__load,size:re.BIG,inputRef:m,withBG:!1,title:"Загрузите изображение",isHovered:!0})]}),e.jsx(oe,{setInputFileProgress:N,InputFileProgress:W,setInputFiles:u,files:f,fileView:"medium",indexedDBName:O,indexedDBStore:j,indexedDB:T.current})]}),e.jsx(te,{setSelectedTags:k,SelectedTags:C,onChange:()=>{h({title:s,textareaValue:g,tags:C})}})]})]}),e.jsxs(a,{max:!0,justify:"between",align:"center",direction:l.matches?"column":"row",children:[e.jsxs(a,{max:!0,align:"center",gap:l?"5":"10",children:[e.jsx(z,{imgURL:`${v}/global/images/serviceExample_authorImg.png`,imgSize:H.SMALLER}),e.jsx("span",{className:r.BlogCreatePageContainer__username,children:"Roman Bayandin-Bessonov"})]}),e.jsxs(a,{max:!0,align:"center",justify:l.matches?"end":"center",gap:"10",children:[e.jsx(d,{className:r.BlogCreatePageContainer__button,text:"Сохранить черновик",type:B.BLACK_WITHOUT_OUTLINE}),e.jsx(d,{onClick:U,className:r.BlogCreatePageContainer__button,text:"Опубликовать",type:B.RED})]})]}),e.jsxs("p",{className:r.BlogCreatePageContainer__footerDesc,children:["Нажимая «Опубликовать», вы принимаете"," ",e.jsx("a",{href:"https://journal.tinkoff.ru/wiki/terms/",children:"условия соглашения"})," ","и"," ",e.jsx("a",{href:"https://journal.tinkoff.ru/wiki/privacy/",children:"политику конфиденциальности"})]})]})})});M.displayName="BlogCreatePageContainer";const fe="_BlogPostIsCreated_4wnqr_3",Ne="_BlogPostIsCreated__img_4wnqr_24",be="_BlogPostIsCreated__caption_4wnqr_29",we="_BlogPostIsCreated__desc_4wnqr_39",Le="_BlogPostIsCreated__button_4wnqr_51",c={BlogPostIsCreated:fe,BlogPostIsCreated__img:Ne,BlogPostIsCreated__caption:be,BlogPostIsCreated__desc:we,BlogPostIsCreated__button:Le},D=t.memo(()=>e.jsx(e.Fragment,{children:e.jsxs(a,{max:!0,gap:"20",align:"center",justify:"center",direction:"column",className:`${c.BlogPostIsCreated} Page__GrayBorderWithWhiteBGWrapper`,children:[e.jsx("img",{className:c.BlogPostIsCreated__img,src:`${v}/BlogPage/PostIsPublished_img.jpg`,alt:"Пост опубликован"}),e.jsx("h1",{className:c.BlogPostIsCreated__caption,children:"Пост опубликован!"}),e.jsx("p",{className:c.BlogPostIsCreated__desc,children:"Пост будет отображаться в вашем профиле, прочая дополнительная, полезная информация или какое-то предупреждение"}),e.jsxs(a,{align:"center",gap:l.matches?"10":"15",children:[e.jsx(d,{className:c.BlogPostIsCreated__button,to:I.BLOG(),type:B.BLUE,text:"На главную"}),e.jsx(d,{className:c.BlogPostIsCreated__button,to:I.USER(),type:B.RED,text:"В профиль"})]})]})}));D.displayName="BlogPostIsCreated";const Ae=["Пост","Обсуждения","Вопрос"],S=t.createContext({selectedPostType:"Пост",setSelectedPostType:t.useState,CreatePostActiveStep:"Создание поста",setCreatePostActiveStep:t.useState}),Re="_BlogCreatePageMain__container_1eu77_3",Fe="_BlogCreatePageMain__mainWrapper_1eu77_20",Me="_BlogCreatePageMain__contentWrapper_1eu77_38",P={BlogCreatePageMain__container:Re,BlogCreatePageMain__mainWrapper:Fe,BlogCreatePageMain__contentWrapper:Me},E=t.memo(()=>{const[o,s]=t.useState(J[0]),[n,g]=t.useState("Пост"),[p,m]=t.useState("Создание поста");return e.jsx(S.Provider,{value:{selectedPostType:n,setSelectedPostType:g,CreatePostActiveStep:p,setCreatePostActiveStep:m},children:e.jsx("main",{className:"Page BlogCreatePage__main",children:e.jsxs("div",{className:"padding",children:[e.jsx("div",{style:{opacity:0,position:"absolute",top:K.matches?"50vh":"0"},id:"BlogPostIsCreated"}),e.jsx(a,{max:!0,className:P.BlogCreatePageMain__contentWrapper,children:e.jsx(ge,{className:P.BlogCreatePageMain__contentWrapper,defaultIsMounted:!0,blocks:[{component:e.jsxs("div",{className:P.BlogCreatePageMain__container,children:[e.jsx(X,{selectedCategory:o,setSelectedCategory:s,canReturn:!0}),e.jsx(a,{className:P.BlogCreatePageMain__mainWrapper,direction:"column",gap:"20",children:e.jsx(M,{})})]}),condition:p=="Создание поста",id:0},{component:e.jsx(D,{}),condition:p=="Пост создан",id:1}],transitionDuration:Q,defaultIndex:0})})]})})})});E.displayName="BlogCreatePageMain";const R=(o,s)=>ne(o,Z.BLOG_CREATE,s),De=t.memo(()=>(t.useEffect(()=>{document.querySelector("html").classList.add("BlogCreatePage"),document.title="TeleWorks | Создание поста"},[]),e.jsx(E,{})));De.displayName="BlogCreatePage";export{De as BlogCreatePage};
