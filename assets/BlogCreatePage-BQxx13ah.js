import{r as t,j as e}from"./react-GnO0LmOb.js";/* empty css             */import{b as z,B as O}from"./BlogFilter-Dx7-6iT9.js";import{U as Z,F as s,I as H,B as u,a as B}from"./index-D4bZW8M2.js";import{b as v,c as E,d as k,t as Q,I as U,A as T,P as W,m as n,U as S,e as K,f as $,g as J,h as X}from"./app-routes-CmLnHQ2b.js";import{M as Y,T as ee}from"./TagsInput-DWpU4V2M.js";import{A as te,a as ae,U as oe}from"./AttachFileContainerItems-CaLXnQn1.js";import{L as se,a as ne}from"./LoadImageBlockWithoutLoading_types-DszHZbhR.js";import{A as re,a as ie}from"./Avatar_types-CT3lO-Gd.js";import{U as le}from"./UseDebounce-B4wZPC3r.js";import{T as ge}from"./TransitionBetweenBlocks-Cx2YgD2z.js";import"./@babel-BoqLWp7i.js";import"./BackSVG-jUZplsqU.js";import"./react-router-dom-CUAiFbiT.js";import"./react-dom-D4eIH3yJ.js";import"./react-router-DwxWe9HT.js";import"./@remix-run-I3CLtn5C.js";import"./IncreaseScaleHover-D7PUFpty.js";import"./styled-components-CkumfAB6.js";import"./react-redux-DfXJ0qGx.js";import"./use-sync-external-store-9xXU9FlP.js";import"./@reduxjs-BCqweWi6.js";import"./redux-DITMfSWq.js";import"./immer-fBqQtvEc.js";import"./redux-thunk-ClJT1hhx.js";import"./reselect-C27TLnWV.js";import"./react-quill-new-CZBXvqAG.js";import"./lodash-Cb79gt0C.js";import"./quill-Ilw8WjZi.js";import"./parchment-Crftfyop.js";import"./quill-delta-DYYBA7Iw.js";import"./fast-diff-Az_-rVRq.js";import"./lodash.clonedeep-8iJh8NJu.js";import"./lodash.isequal-DAdcYQBn.js";import"./eventemitter3-DNDOqmeN.js";import"./lodash-es-BKPNmaDy.js";import"./primereact-CaVLV2bU.js";const _e="_BlogCreatePageContainer_1n9lh_3",ce="_BlogCreatePageContainer__img_1n9lh_8",Ce="_BlogCreatePageContainer__category_1n9lh_22",pe="_BlogCreatePageContainer__postType_1n9lh_32",me="_BlogCreatePageContainer__postType__svg_1n9lh_47",de="_BlogCreatePageContainer__postType__svg__active_1n9lh_58",ue="_BlogCreatePageContainer__postType__text_1n9lh_61",Be="_BlogCreatePageContainer__postType__text__active_1n9lh_73",Pe="_BlogCreatePageContainer__desc_1n9lh_76",he="_BlogCreatePageContainer__titleInput_1n9lh_100",xe="_BlogCreatePageContainer__load_1n9lh_122",Ie="_BlogCreatePageContainer__inputWrapper_1n9lh_125",fe="_BlogCreatePageContainer__username_1n9lh_128",je="_BlogCreatePageContainer__button_1n9lh_138",ye="_BlogCreatePageContainer__footerDesc_1n9lh_154",ve="_BlogCreatePageContainer__redArrowRightSvg_1n9lh_179",o={BlogCreatePageContainer:_e,BlogCreatePageContainer__img:ce,BlogCreatePageContainer__category:Ce,BlogCreatePageContainer__postType:pe,BlogCreatePageContainer__postType__svg:me,BlogCreatePageContainer__postType__svg__active:de,BlogCreatePageContainer__postType__text:ue,BlogCreatePageContainer__postType__text__active:Be,BlogCreatePageContainer__desc:Pe,BlogCreatePageContainer__titleInput:he,BlogCreatePageContainer__load:xe,BlogCreatePageContainer__inputWrapper:Ie,BlogCreatePageContainer__username:fe,BlogCreatePageContainer__button:je,BlogCreatePageContainer__footerDesc:ye,BlogCreatePageContainer__redArrowRightSvg:ve},Te=l=>t.createElement("svg",{width:10,height:18,viewBox:"0 0 10 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...l},t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.337951 17.6562C-0.112651 17.1977 -0.112651 16.4544 0.337951 15.996L7.21433 8.99998L0.337951 2.00391C-0.112651 1.54546 -0.112651 0.802292 0.337951 0.34384C0.788553 -0.114615 1.51908 -0.114615 1.9697 0.34384L9.66204 8.16995C10.1127 8.6284 10.1127 9.37157 9.66204 9.83002L1.9697 17.6562C1.51908 18.1146 0.788553 18.1146 0.337951 17.6562Z",fill:"#FF5555"})),Se=l=>t.createElement("svg",{width:19,height:19,viewBox:"0 0 19 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",...l},t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.2211 0.762396C16.2046 -0.25413 14.5564 -0.254134 13.5399 0.762396L1.25589 13.0464C0.892513 13.4098 0.644822 13.8726 0.544043 14.3765L0.0346636 16.9234C-0.208185 18.1376 0.862371 19.2082 2.07661 18.9653L4.6235 18.4559C5.12741 18.3552 5.59022 18.1075 5.9536 17.7441L18.2376 5.4601C19.2541 4.44357 19.2541 2.79546 18.2376 1.77892L17.2211 0.762396ZM14.7669 1.98945C15.1058 1.65061 15.6552 1.65061 15.9941 1.98945L17.0105 3.00599C17.3494 3.34482 17.3494 3.89419 17.0105 4.23304L14.6925 6.55107L12.449 4.30749L14.7669 1.98945ZM11.2218 5.53455L2.48295 14.2735C2.36182 14.3946 2.27926 14.5489 2.24567 14.7168L1.73629 17.2637L4.28318 16.7543C4.45115 16.7207 4.60542 16.6382 4.72654 16.5171L13.4654 7.77813L11.2218 5.53455Z",fill:"#FF5555"})),y=new oe,be=t.memo(()=>{const{setSelectedPostType:l,selectedPostType:C}=t.useContext(v),r=E(k.GET),[g,p]=t.useState(r?r.title:""),[i,M]=t.useState(r?r.textareaValue:""),b=t.useRef(null),[L,P]=t.useState([]),[V,w]=t.useState(0),[m,G]=t.useState(r?r.tags:[]),{setCreatePostActiveStep:N}=t.useContext(v),[F,R]=Z(),h=t.useMemo(()=>!!g,[g]),x=t.useMemo(()=>!!i,[i]),q=t.useCallback(()=>{if(!h||!x){const a=document.getElementById("BlogCreatePageContainer__blogCreatePagePostTypes");return a==null||a.scrollIntoView({behavior:"smooth"}),R(!0)}N("Пост создан"),setTimeout(()=>{document.getElementById("BlogPostIsCreated").scrollIntoView({behavior:"smooth"})},Q)},[x,h,N,R]),I=t.useCallback(le(a=>{E(k.UPDATE,a)},1e3),[]),f=t.useRef(),d=t.useMemo(()=>U.find(a=>a.route==T.BLOG_CREATE).name,[]),A=async a=>{if(W){const _=a.target.files;if(_)for(const j of _)y.saveLoadedFile(f.current,d,j)}},D=t.useCallback(async a=>{const _=await y.fetchLoadedFiles(a,d);_&&P(_.map(j=>j.file))},[d]);return t.useEffect(()=>{W&&(async()=>(f.current=await y.openDatabase($,1,U.map(_=>_.name)),D(f.current)))()},[D]),e.jsxs(s,{direction:"column",gap:n?"5":"10",className:o.BlogCreatePageContainer,children:[e.jsxs(s,{gap:n?"5":"15",align:"center",children:[e.jsx("img",{className:o.BlogCreatePageContainer__img,src:`${S}/global/images/serviceExample_img_2.png`,alt:"Изображение автора поста"}),e.jsxs(s,{align:"center",gap:n?"5":"10",children:[e.jsx("span",{className:o.BlogCreatePageContainer__category,children:"Владелец канала"}),e.jsx(Te,{className:o.BlogCreatePageContainer__redArrowRightSvg})]})]}),e.jsx(s,{align:"center",gap:n?"5":"10",children:K.map(a=>e.jsxs(s,{id:"BlogCreatePageContainer__blogCreatePagePostTypes",className:`${o.BlogCreatePageContainer__postType}
            ${C==a?o.BlogCreatePageContainer__postType__active:""} `,align:"center",gap:"5",onClick:()=>l(a),children:[e.jsx(Se,{className:`${o.BlogCreatePageContainer__postType__svg}
            ${C==a?o.BlogCreatePageContainer__postType__svg__active:""} `}),e.jsx("span",{className:`${o.BlogCreatePageContainer__postType__text}
            ${C==a?o.BlogCreatePageContainer__postType__text__active:""} `,children:a})]},a))}),e.jsxs("p",{className:o.BlogCreatePageContainer__desc,children:["Вы можете написать текст на любую интересную вам тему. Но сначала прочитайте наши"," ",e.jsx("a",{href:"https://journal.tinkoff.ru/community-rules/",children:"правила публикации."})," ","После модерации текст появится"," ",e.jsx("a",{href:"https://journal.tinkoff.ru/community/",children:"в Сообществе"})," и в вашем личном профиле."]}),e.jsxs(s,{max:!0,direction:"column",gap:n.matches?"0":"20",children:[e.jsx(H,{className:o.BlogCreatePageContainer__titleInput,placeholder:"Заголовок",value:g,onChange:a=>{p(a.target.value),I({title:a.target.value,textareaValue:i,tags:m})},type:"text",isWarn:F&&!h}),e.jsx(Y,{TextareaValue:i,setTextareaValue:M,onChange:()=>{I({title:g,textareaValue:i,tags:m})},minSymbolsAmount:100,maxSymbolsAmount:500,placeholder:"Ваш текст поста...",isWarn:F&&!x}),e.jsxs(s,{max:!0,gap:"10",direction:"column",children:[e.jsxs(s,{max:!0,gap:"10",direction:"column",children:[e.jsxs(s,{max:!0,direction:"column",className:o.BlogCreatePageContainer__inputWrapper,children:[e.jsx(te,{inputRef:b,InputFiles:L,setInputFiles:P,setInputFileProgress:w,accept:"image/png, image/gif, image/jpeg, image/jpg",onChange:A}),e.jsx(se,{className:o.BlogCreatePageContainer__load,size:ne.BIG,inputRef:b,withBG:!1,title:"Загрузите изображение",isHovered:!0})]}),e.jsx(ae,{setInputFileProgress:w,InputFileProgress:V,setInputFiles:P,files:L,fileView:"medium",indexedDBName:$,indexedDBStore:d,onChange:A})]}),e.jsx(ee,{setSelectedTags:G,SelectedTags:m,onChange:()=>{I({title:g,textareaValue:i,tags:m})}})]})]}),e.jsxs(s,{max:!0,justify:"between",align:"center",direction:n.matches?"column":"row",children:[e.jsxs(s,{max:!0,align:"center",gap:n?"5":"10",children:[e.jsx(re,{imgURL:`${S}/global/images/serviceExample_authorImg.png`,imgSize:ie.SMALLER}),e.jsx("span",{className:o.BlogCreatePageContainer__username,children:"Roman Bayandin-Bessonov"})]}),e.jsxs(s,{max:!0,align:"center",justify:n.matches?"end":"center",gap:"10",children:[e.jsx(u,{className:o.BlogCreatePageContainer__button,text:"Сохранить черновик",type:B.BLACK_WITHOUT_OUTLINE}),e.jsx(u,{onClick:q,className:o.BlogCreatePageContainer__button,text:"Опубликовать",type:B.RED})]})]}),e.jsxs("p",{className:o.BlogCreatePageContainer__footerDesc,children:["Нажимая «Опубликовать», вы принимаете"," ",e.jsx("a",{href:"https://journal.tinkoff.ru/wiki/terms/",children:"условия соглашения"})," ","и"," ",e.jsx("a",{href:"https://journal.tinkoff.ru/wiki/privacy/",children:"политику конфиденциальности"})]})]})}),Le="_BlogPostIsCreated_4wnqr_3",we="_BlogPostIsCreated__img_4wnqr_24",Ne="_BlogPostIsCreated__caption_4wnqr_29",Fe="_BlogPostIsCreated__desc_4wnqr_39",Re="_BlogPostIsCreated__button_4wnqr_51",c={BlogPostIsCreated:Le,BlogPostIsCreated__img:we,BlogPostIsCreated__caption:Ne,BlogPostIsCreated__desc:Fe,BlogPostIsCreated__button:Re},Ae=t.memo(()=>e.jsx(e.Fragment,{children:e.jsxs(s,{max:!0,gap:"20",align:"center",justify:"center",direction:"column",className:`${c.BlogPostIsCreated} Page__GrayBorderWithWhiteBGWrapper`,children:[e.jsx("img",{className:c.BlogPostIsCreated__img,src:`${S}/BlogPage/PostIsPublished_img.jpg`,alt:"Пост опубликован"}),e.jsx("h1",{className:c.BlogPostIsCreated__caption,children:"Пост опубликован!"}),e.jsx("p",{className:c.BlogPostIsCreated__desc,children:"Пост будет отображаться в вашем профиле, прочая дополнительная, полезная информация или какое-то предупреждение"}),e.jsxs(s,{align:"center",gap:n.matches?"10":"15",children:[e.jsx(u,{className:c.BlogPostIsCreated__button,to:T.BLOG,type:B.BLUE,text:"На главную"}),e.jsx(u,{className:c.BlogPostIsCreated__button,to:T.USER,type:B.RED,text:"В профиль"})]})]})})),Pt=t.memo(()=>{t.useEffect(()=>{document.querySelector("html").classList.add("BlogCreatePage"),document.title="TeleWorks | Создание поста"},[]);const[l,C]=t.useState(z[0]),[r,g]=t.useState("Пост"),[p,i]=t.useState("Создание поста");return e.jsx(v.Provider,{value:{selectedPostType:r,setSelectedPostType:g,CreatePostActiveStep:p,setCreatePostActiveStep:i},children:e.jsx("main",{className:"Page BlogCreatePage__main",children:e.jsxs("div",{className:"padding",children:[e.jsx("div",{style:{opacity:0,position:"absolute",top:J.matches?"50vh":"0"},id:"BlogPostIsCreated"}),e.jsx(s,{max:!0,className:"BlogCreatePage__contentWrapper",children:e.jsx(ge,{className:"BlogCreatePage__contentWrapper",blocks:[{component:e.jsxs("div",{className:"BlogCreatePage__container",children:[e.jsx(O,{selectedCategory:l,setSelectedCategory:C,canReturn:!0}),e.jsx(s,{className:"BlogCreatePage__mainWrapper",direction:"column",gap:"20",children:e.jsx(be,{})})]}),condition:p=="Создание поста",id:0},{component:e.jsx(Ae,{}),condition:p=="Пост создан",id:1}],transitionDuration:X,defaultIndex:0})})]})})})});export{Pt as BlogCreatePage};
