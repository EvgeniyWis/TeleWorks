import{r as a,j as e}from"./react-GnO0LmOb.js";import{T as O}from"./TransitionBetweenBlocks-Cx2YgD2z.js";/* empty css             */import{U as H,F as o,I as R,B as N,a as y}from"./index-D4bZW8M2.js";import{S as M}from"./BackSVG-jUZplsqU.js";import{I as Q}from"./IncreaseScaleHover-D7PUFpty.js";import{L as J}from"./react-router-dom-CUAiFbiT.js";import{l as X,L as Y,d as L,I as W,A as K,t as Z,f as P,U as ee,g as te,h as ae}from"./app-routes-CmLnHQ2b.js";import{L as se,a as ne}from"./LoadImageBlockWithoutLoading_types-DszHZbhR.js";import{A as re,a as ie,U as ue}from"./AttachFileContainerItems-CaLXnQn1.js";import{U as oe}from"./UseDebounce-B4wZPC3r.js";import"./@babel-BoqLWp7i.js";import"./react-dom-D4eIH3yJ.js";import"./styled-components-CkumfAB6.js";import"./react-router-DwxWe9HT.js";import"./@remix-run-I3CLtn5C.js";import"./react-redux-DfXJ0qGx.js";import"./use-sync-external-store-9xXU9FlP.js";import"./@reduxjs-BCqweWi6.js";import"./redux-DITMfSWq.js";import"./immer-fBqQtvEc.js";import"./redux-thunk-ClJT1hhx.js";import"./reselect-C27TLnWV.js";import"./primereact-CaVLV2bU.js";const de="_KindDeedsCreateRequestContainer_147wh_2",_e="_KindDeedsCreateRequestContainer__caption_147wh_9",ce="_KindDeedsCreateRequestContainer__back_147wh_14",le="_KindDeedsCreateRequestContainer__inputsWrapper_147wh_18",me="_KindDeedsCreateRequestContainer__wrapper_147wh_21",pe="_KindDeedsCreateRequestContainer__firstSubcaption_147wh_24",Ce="_KindDeedsCreateRequestContainer__button_147wh_30",De="_KindDeedsCreateRequestContainer__input_147wh_18",Re="_KindDeedsCreateRequestContainer__input__sum_147wh_48",ge="_KindDeedsCreateRequestContainer__textarea_147wh_64",qe="_KindDeedsCreateRequestContainer__loadDocumentsWrapper_147wh_73",n={KindDeedsCreateRequestContainer:de,KindDeedsCreateRequestContainer__caption:_e,KindDeedsCreateRequestContainer__back:ce,KindDeedsCreateRequestContainer__inputsWrapper:le,KindDeedsCreateRequestContainer__wrapper:me,KindDeedsCreateRequestContainer__firstSubcaption:pe,KindDeedsCreateRequestContainer__button:Ce,KindDeedsCreateRequestContainer__input:De,KindDeedsCreateRequestContainer__input__sum:Re,KindDeedsCreateRequestContainer__textarea:ge,KindDeedsCreateRequestContainer__loadDocumentsWrapper:qe},Ke="_Textarea_orfq3_3",xe="_Textarea__warning_orfq3_48",U={Textarea:Ke,Textarea__warning:xe},he=a.memo(({className:d,placeholder:s,value:r,onChange:x,isWarn:i,refTextarea:h,"data-testid":u,id:I})=>e.jsx("textarea",{id:I,"data-tesid":u,className:`${U.Textarea} ${d} ${i?U.Textarea__warning:""}`,placeholder:s,value:r,onChange:x,ref:h})),k=(d,s)=>X(d,Y.CREATE_ORDER_STEP,s),b=new ue,Ie=a.memo(({setRequestIsCreated:d})=>{const s=k(L.GET),[r,x]=a.useState(s?s.surnameInputValue:""),[i,h]=a.useState(s?s.nameInputValue:""),[u,I]=a.useState(s?s.patronymicInputValue:""),[_,F]=a.useState(s?s.organizationInputValue:""),[c,$]=a.useState(s?s.requestSumInputValue:""),[l,A]=a.useState(s?s.goalTextareaValue:""),[D,f]=a.useState([]),[z,T]=a.useState(0),V=a.useRef(null),C=a.useCallback(oe(t=>{k(L.UPDATE,t)},1e3),[]),j=a.useRef(),q=a.useMemo(()=>W.find(t=>t.route==K.KIND_DEEDS_CREATE_REQUEST).name,[]),v=async t=>{const p=t.target.files;if(p)for(const S of p)b.saveLoadedFile(j.current,q,S)},w=a.useCallback(async t=>{const p=await b.fetchLoadedFiles(t,q);p&&f(p.map(S=>S.file))},[q]);a.useEffect(()=>{(async()=>{j.current=await b.openDatabase(P,1,W.map(p=>p.name)),w(j.current)})()},[w]);const[m,E]=H(),B=a.useRef(),G=a.useCallback(()=>{if(!r||!i||!u||!_||!c||!D.length)return E(!0);d(!0),B.current=setTimeout(()=>{var t;(t=document.getElementById("KindDeedsRequestCreated"))==null||t.scrollIntoView({behavior:"smooth"}),clearTimeout(B.current)},Z+100)},[D.length,i,_,u,c,d,E,r]);return e.jsxs(o,{max:!0,className:n.KindDeedsCreateRequestContainer,gap:"15",direction:"column",children:[e.jsx(Q,{children:e.jsx(J,{to:K.KIND_DEEDS,children:e.jsxs(o,{align:"center",gap:"15",children:[e.jsx(M,{className:n.KindDeedsCreateRequestContainer__back}),e.jsx("h1",{className:n.KindDeedsCreateRequestContainer__caption,children:"Создание запроса средств"})]})})}),e.jsxs(o,{max:!0,className:"Page__GrayBorderSecondaryWrapper",gap:"10",direction:"column",children:[e.jsx("h2",{className:`KindDeedsCreateRequestPage__subcaption 
              ${n.KindDeedsCreateRequestContainer__firstSubcaption}`,children:"Контактные данные"}),e.jsxs(o,{max:!0,className:n.KindDeedsCreateRequestContainer__wrapper,gap:"20",direction:"column",children:[e.jsxs(o,{max:!0,className:n.KindDeedsCreateRequestContainer__inputsWrapper,gap:"20",direction:"column",children:[e.jsx(R,{className:n.KindDeedsCreateRequestContainer__input,type:"text",value:r,onChange:t=>{x(t.target.value),C({surnameInputValue:t.target.value,nameInputValue:i,patronymicInputValue:u,organizationInputValue:_,requestSumInputValue:Number(c),goalTextareaValue:l})},isWarn:m&&!r,placeholder:"Фамилия"}),e.jsx(R,{className:n.KindDeedsCreateRequestContainer__input,type:"text",value:i,onChange:t=>{h(t.target.value),C({surnameInputValue:r,nameInputValue:t.target.value,patronymicInputValue:u,organizationInputValue:_,requestSumInputValue:Number(c),goalTextareaValue:l})},isWarn:m&&!i,placeholder:"Имя"}),e.jsx(R,{className:n.KindDeedsCreateRequestContainer__input,type:"text",value:u,onChange:t=>{I(t.target.value),C({surnameInputValue:r,nameInputValue:i,patronymicInputValue:t.target.value,organizationInputValue:_,requestSumInputValue:Number(c),goalTextareaValue:l})},isWarn:m&&!u,placeholder:"Отчество"})]}),e.jsx("h2",{className:"KindDeedsCreateRequestPage__subcaption",children:"Название организации/инициативы:"}),e.jsx(R,{className:n.KindDeedsCreateRequestContainer__input,type:"text",value:_,onChange:t=>{F(t.target.value),C({surnameInputValue:r,nameInputValue:i,patronymicInputValue:u,organizationInputValue:t.target.value,requestSumInputValue:Number(c),goalTextareaValue:l})},isWarn:m&&!_,placeholder:"Организация"}),e.jsx("h2",{className:"KindDeedsCreateRequestPage__subcaption",children:"Цель финансирования"}),e.jsx(he,{className:n.KindDeedsCreateRequestContainer__textarea,value:l,onChange:t=>{A(t.target.value),C({surnameInputValue:r,nameInputValue:i,patronymicInputValue:u,organizationInputValue:_,requestSumInputValue:Number(c),goalTextareaValue:t.target.value})},isWarn:m&&!l,placeholder:"Подробно объясните, как будут использованы запрашиваемые средства и какое влияние они окажут"}),e.jsxs(o,{className:n.KindDeedsCreateRequestContainer__loadDocumentsWrapper,max:!0,children:[e.jsx(se,{title:"Загрузите документы",size:ne.BIG,withBG:!1,isWarn:m&&!D.length,isHovered:!0,inputRef:V}),e.jsx(re,{inputRef:V,setInputFiles:f,InputFiles:D,setInputFileProgress:T,accept:"image/jpg, image/jpeg, image/png, image/gif",zIndex:-1,onChange:v})]}),e.jsx(ie,{InputFileProgress:z,setInputFileProgress:T,setInputFiles:f,files:D,fileView:"medium",accept:"image/jpg, image/jpeg, image/png, image/gif",indexedDBName:P,indexedDBStore:q,onChange:v}),e.jsx("h2",{className:"KindDeedsCreateRequestPage__subcaption",children:"Сумма запроса"}),e.jsx(o,{max:!0,className:n.KindDeedsCreateRequestContainer__input__sum,children:e.jsx(R,{className:n.KindDeedsCreateRequestContainer__input,type:"number",value:c,onChange:t=>{$(t.target.value),C({surnameInputValue:r,nameInputValue:i,patronymicInputValue:u,organizationInputValue:_,requestSumInputValue:Number(t.target.value),goalTextareaValue:l})},isWarn:m&&!c,placeholder:"1 422 223₽"})})]})]}),e.jsxs(o,{max:!0,justify:"end",align:"center",children:[e.jsx(N,{to:K.KIND_DEEDS,type:y.BLACK_WITHOUT_OUTLINE,text:"Назад",className:n.KindDeedsCreateRequestContainer__button}),e.jsx(N,{type:y.RED,text:"Создать запрос",className:n.KindDeedsCreateRequestContainer__button,onClick:G})]})]})}),fe="_KindDeedsRequestCreated_2bh8i_1",je="_KindDeedsRequestCreated__img_2bh8i_9",Se="_KindDeedsRequestCreated__caption_2bh8i_14",be="_KindDeedsRequestCreated__desc_2bh8i_19",Ne="_KindDeedsRequestCreated__button_2bh8i_26",g={KindDeedsRequestCreated:fe,KindDeedsRequestCreated__img:je,KindDeedsRequestCreated__caption:Se,KindDeedsRequestCreated__desc:be,KindDeedsRequestCreated__button:Ne},ye=a.memo(()=>e.jsxs(o,{className:`${g.KindDeedsRequestCreated} Page__GrayBorderSecondaryWrapper`,align:"center",justify:"center",direction:"column",gap:"10",max:!0,children:[e.jsx("img",{className:g.KindDeedsRequestCreated__img,src:`${ee}/KindDeeds/letterOfKindness_img.png`,alt:"Письмо с сердечком и логотипов TeleWorks"}),e.jsx("h1",{className:g.KindDeedsRequestCreated__caption,children:"Запрос создан!"}),e.jsx("p",{className:g.KindDeedsRequestCreated__desc,children:"Сейчас запрос проходит модерацию, после проверки мы пришлем вам уведомление или другая важна информация"}),e.jsx(N,{className:g.KindDeedsRequestCreated__button,text:"На главную",to:K.KIND_DEEDS,type:y.RED})]})),et=a.memo(()=>{a.useEffect(()=>{document.querySelector("html").classList.add("KindDeedsCreateRequestPage"),document.title=`${document.title} | Создание запроса средств`},[]);const[d,s]=a.useState(!1);return e.jsx("main",{className:"Page KindDeedsCreateRequestPage__main",children:e.jsx("div",{className:"padding",children:e.jsxs(o,{max:!0,align:"center",justify:"center",className:"KindDeedsCreateRequestPage__contentWrapper",children:[e.jsx("div",{id:"KindDeedsRequestCreated",style:{position:"absolute",top:te.matches?"70vh":"5vh"}}),e.jsx(O,{blocks:[{component:e.jsx(Ie,{setRequestIsCreated:s}),condition:!d,id:0},{component:e.jsx(ye,{}),condition:d,id:1}],transitionDuration:ae,defaultIndex:0})]})})})});export{et as KindDeedsCreateRequestPage};
