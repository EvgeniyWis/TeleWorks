import{r as a,j as e}from"./react-GnO0LmOb.js";import{T as O}from"./TransitionBetweenBlocks-KbP-OhqT.js";import{I as L,A as q,U as H,t as M,F as u,k as Q,c as R,d as W,g as N,h as y,a as J,i as X,j as Y}from"./index-Ctj-39v2.js";import{S as Z}from"./BackSVG-jUZplsqU.js";import{L as ee}from"./react-router-dom-Bwj3d0Nk.js";import{L as te,a as ae}from"./LoadImageBlockWithoutLoading_types-BOkaJxfD.js";import{A as se,a as ne,U as re}from"./AttachFileContainerItems-CHu_ypSC.js";import{U as ie,L as oe,a as P}from"./LocalStorageKeys-DOtQ5Pc1.js";import{U as ue}from"./UseDebounce-B4wZPC3r.js";import"./@babel-BoqLWp7i.js";import"./react-dom-D4eIH3yJ.js";import"./react-share-social-DgRi0E-b.js";import"./react-is-DcfIKM1A.js";import"./clsx-B-dksMZM.js";import"./@emotion-C_ibbh6v.js";import"./hoist-non-react-statics-DWNbBR1I.js";import"./stylis-FDnFs_-n.js";import"./react-transition-group-CzWA12An.js";import"./@popperjs-BQBsAJpH.js";import"./@mui-DtOm6wgI.js";import"./jss-plugin-rule-value-function-P3FhxEwN.js";import"./jss-DAkgY5qt.js";import"./is-in-browser-I-S1O4Zl.js";import"./jss-plugin-global-SbrwI9VQ.js";import"./jss-plugin-nested-mmogzEqH.js";import"./jss-plugin-camel-case-B3itHn0h.js";import"./hyphenate-style-name-HOLnhz8K.js";import"./jss-plugin-default-unit-zsTukSBu.js";import"./jss-plugin-vendor-prefixer-Dq8p7DI_.js";import"./css-vendor-v3ZYP5j7.js";import"./jss-plugin-props-sort-D2CdvUsV.js";import"./react-share-CbqYIZxE.js";import"./classnames-DTKT5ssy.js";import"./jsonp-Daw0h_Hj.js";import"./@reduxjs-BCqweWi6.js";import"./redux-DITMfSWq.js";import"./immer-fBqQtvEc.js";import"./redux-thunk-ClJT1hhx.js";import"./reselect-C27TLnWV.js";import"./react-redux-DfXJ0qGx.js";import"./use-sync-external-store-9xXU9FlP.js";import"./styled-components-CkumfAB6.js";import"./primereact-CaVLV2bU.js";import"./chart.js-DKcZzhFa.js";import"./@kurkle-BZxJdD1U.js";import"./react-chartjs-2-C2kzdvfa.js";import"./react-select-DExkn266.js";import"./@floating-ui-RYOEkms0.js";import"./use-isomorphic-layout-effect-SVXGVfvv.js";import"./memoize-one-BdPwpGay.js";import"./swiper-CZB9Z16M.js";import"./react-router-Spu4mbw2.js";import"./@remix-run-I3CLtn5C.js";const de="_KindDeedsCreateRequestContainer_147wh_2",_e="_KindDeedsCreateRequestContainer__caption_147wh_9",ce="_KindDeedsCreateRequestContainer__back_147wh_14",me="_KindDeedsCreateRequestContainer__inputsWrapper_147wh_18",pe="_KindDeedsCreateRequestContainer__wrapper_147wh_21",le="_KindDeedsCreateRequestContainer__firstSubcaption_147wh_24",Ce="_KindDeedsCreateRequestContainer__button_147wh_30",De="_KindDeedsCreateRequestContainer__input_147wh_18",Re="_KindDeedsCreateRequestContainer__input__sum_147wh_48",ge="_KindDeedsCreateRequestContainer__textarea_147wh_64",qe="_KindDeedsCreateRequestContainer__loadDocumentsWrapper_147wh_73",n={KindDeedsCreateRequestContainer:de,KindDeedsCreateRequestContainer__caption:_e,KindDeedsCreateRequestContainer__back:ce,KindDeedsCreateRequestContainer__inputsWrapper:me,KindDeedsCreateRequestContainer__wrapper:pe,KindDeedsCreateRequestContainer__firstSubcaption:le,KindDeedsCreateRequestContainer__button:Ce,KindDeedsCreateRequestContainer__input:De,KindDeedsCreateRequestContainer__input__sum:Re,KindDeedsCreateRequestContainer__textarea:ge,KindDeedsCreateRequestContainer__loadDocumentsWrapper:qe},Ke="_Textarea_orfq3_3",xe="_Textarea__warning_orfq3_48",k={Textarea:Ke,Textarea__warning:xe},he=a.memo(({className:d,placeholder:s,value:r,onChange:K,isWarn:i,refTextarea:x,"data-testid":o,id:h})=>e.jsx("textarea",{id:h,"data-tesid":o,className:`${k.Textarea} ${d} ${i?k.Textarea__warning:""}`,placeholder:s,value:r,onChange:K,ref:x})),U=(d,s)=>ie(d,oe.CREATE_ORDER_STEP,s),b=new re,Ie=a.memo(({setRequestIsCreated:d})=>{const s=U(P.GET),[r,K]=a.useState(s?s.surnameInputValue:""),[i,x]=a.useState(s?s.nameInputValue:""),[o,h]=a.useState(s?s.patronymicInputValue:""),[_,F]=a.useState(s?s.organizationInputValue:""),[c,$]=a.useState(s?s.requestSumInputValue:""),[m,A]=a.useState(s?s.goalTextareaValue:""),[D,I]=a.useState([]),[z,T]=a.useState(0),V=a.useRef(null),C=a.useCallback(ue(t=>{U(P.UPDATE,t)},1e3),[]),j=a.useRef(),f=a.useMemo(()=>L.find(t=>t.route==q.KIND_DEEDS_CREATE_REQUEST).name,[]),v=async t=>{const l=t.target.files;if(l)for(const S of l)b.saveLoadedFile(j.current,f,S)},w=a.useCallback(async t=>{const l=await b.fetchLoadedFiles(t,f);l&&I(l.map(S=>S.file))},[]);a.useEffect(()=>{(async()=>{j.current=await b.openDatabase(W,1,L.map(l=>l.name)),w(j.current)})()},[w]);const[p,E]=H(),B=a.useRef(),G=a.useCallback(()=>{if(!r||!i||!o||!_||!c||!D.length)return E(!0);d(!0),B.current=setTimeout(()=>{var t;(t=document.getElementById("KindDeedsRequestCreated"))==null||t.scrollIntoView({behavior:"smooth"}),clearTimeout(B.current)},M+100)},[D.length,i,_,o,c,d,E,r]);return e.jsxs(u,{max:!0,className:n.KindDeedsCreateRequestContainer,gap:"15",direction:"column",children:[e.jsx(Q,{children:e.jsx(ee,{to:q.KIND_DEEDS,children:e.jsxs(u,{align:"center",gap:"15",children:[e.jsx(Z,{className:n.KindDeedsCreateRequestContainer__back}),e.jsx("h1",{className:n.KindDeedsCreateRequestContainer__caption,children:"Создание запроса средств"})]})})}),e.jsxs(u,{max:!0,className:"Page__GrayBorderSecondaryWrapper",gap:"10",direction:"column",children:[e.jsx("h2",{className:`KindDeedsCreateRequestPage__subcaption 
              ${n.KindDeedsCreateRequestContainer__firstSubcaption}`,children:"Контактные данные"}),e.jsxs(u,{max:!0,className:n.KindDeedsCreateRequestContainer__wrapper,gap:"20",direction:"column",children:[e.jsxs(u,{max:!0,className:n.KindDeedsCreateRequestContainer__inputsWrapper,gap:"20",direction:"column",children:[e.jsx(R,{className:n.KindDeedsCreateRequestContainer__input,type:"text",value:r,onChange:t=>{K(t.target.value),C({surnameInputValue:t.target.value,nameInputValue:i,patronymicInputValue:o,organizationInputValue:_,requestSumInputValue:Number(c),goalTextareaValue:m})},isWarn:p&&!r,placeholder:"Фамилия"}),e.jsx(R,{className:n.KindDeedsCreateRequestContainer__input,type:"text",value:i,onChange:t=>{x(t.target.value),C({surnameInputValue:r,nameInputValue:t.target.value,patronymicInputValue:o,organizationInputValue:_,requestSumInputValue:Number(c),goalTextareaValue:m})},isWarn:p&&!i,placeholder:"Имя"}),e.jsx(R,{className:n.KindDeedsCreateRequestContainer__input,type:"text",value:o,onChange:t=>{h(t.target.value),C({surnameInputValue:r,nameInputValue:i,patronymicInputValue:t.target.value,organizationInputValue:_,requestSumInputValue:Number(c),goalTextareaValue:m})},isWarn:p&&!o,placeholder:"Отчество"})]}),e.jsx("h2",{className:"KindDeedsCreateRequestPage__subcaption",children:"Название организации/инициативы:"}),e.jsx(R,{className:n.KindDeedsCreateRequestContainer__input,type:"text",value:_,onChange:t=>{F(t.target.value),C({surnameInputValue:r,nameInputValue:i,patronymicInputValue:o,organizationInputValue:t.target.value,requestSumInputValue:Number(c),goalTextareaValue:m})},isWarn:p&&!_,placeholder:"Организация"}),e.jsx("h2",{className:"KindDeedsCreateRequestPage__subcaption",children:"Цель финансирования"}),e.jsx(he,{className:n.KindDeedsCreateRequestContainer__textarea,value:m,onChange:t=>{A(t.target.value),C({surnameInputValue:r,nameInputValue:i,patronymicInputValue:o,organizationInputValue:_,requestSumInputValue:Number(c),goalTextareaValue:t.target.value})},isWarn:p&&!m,placeholder:"Подробно объясните, как будут использованы запрашиваемые средства и какое влияние они окажут"}),e.jsxs(u,{className:n.KindDeedsCreateRequestContainer__loadDocumentsWrapper,max:!0,children:[e.jsx(te,{title:"Загрузите документы",size:ae.BIG,withBG:!1,isWarn:p&&!D.length,isHovered:!0,inputRef:V}),e.jsx(se,{inputRef:V,setInputFiles:I,InputFiles:D,setInputFileProgress:T,accept:"image/jpg, image/jpeg, image/png, image/gif",zIndex:-1,onChange:v})]}),e.jsx(ne,{InputFileProgress:z,setInputFileProgress:T,setInputFiles:I,files:D,fileView:"medium",accept:"image/jpg, image/jpeg, image/png, image/gif",indexedDBName:W,indexedDBStore:f,onChange:v}),e.jsx("h2",{className:"KindDeedsCreateRequestPage__subcaption",children:"Сумма запроса"}),e.jsx(u,{max:!0,className:n.KindDeedsCreateRequestContainer__input__sum,children:e.jsx(R,{className:n.KindDeedsCreateRequestContainer__input,type:"number",value:c,onChange:t=>{$(t.target.value),C({surnameInputValue:r,nameInputValue:i,patronymicInputValue:o,organizationInputValue:_,requestSumInputValue:Number(t.target.value),goalTextareaValue:m})},isWarn:p&&!c,placeholder:"1 422 223₽"})})]})]}),e.jsxs(u,{max:!0,justify:"end",align:"center",children:[e.jsx(N,{to:q.KIND_DEEDS,type:y.BLACK_WITHOUT_OUTLINE,text:"Назад",className:n.KindDeedsCreateRequestContainer__button}),e.jsx(N,{type:y.RED,text:"Создать запрос",className:n.KindDeedsCreateRequestContainer__button,onClick:G})]})]})}),je="_KindDeedsRequestCreated_2bh8i_1",fe="_KindDeedsRequestCreated__img_2bh8i_9",Se="_KindDeedsRequestCreated__caption_2bh8i_14",be="_KindDeedsRequestCreated__desc_2bh8i_19",Ne="_KindDeedsRequestCreated__button_2bh8i_26",g={KindDeedsRequestCreated:je,KindDeedsRequestCreated__img:fe,KindDeedsRequestCreated__caption:Se,KindDeedsRequestCreated__desc:be,KindDeedsRequestCreated__button:Ne},ye=a.memo(()=>e.jsxs(u,{className:`${g.KindDeedsRequestCreated} Page__GrayBorderSecondaryWrapper`,align:"center",justify:"center",direction:"column",gap:"10",max:!0,children:[e.jsx("img",{className:g.KindDeedsRequestCreated__img,src:`${J}/KindDeeds/letterOfKindness_img.png`,alt:"Письмо с сердечком и логотипов TeleWorks"}),e.jsx("h1",{className:g.KindDeedsRequestCreated__caption,children:"Запрос создан!"}),e.jsx("p",{className:g.KindDeedsRequestCreated__desc,children:"Сейчас запрос проходит модерацию, после проверки мы пришлем вам уведомление или другая важна информация"}),e.jsx(N,{className:g.KindDeedsRequestCreated__button,text:"На главную",to:q.KIND_DEEDS,type:y.RED})]})),yt=a.memo(()=>{a.useEffect(()=>{document.querySelector("html").classList.add("KindDeedsCreateRequestPage"),document.title=`${document.title} | Создание запроса средств`},[]);const[d,s]=a.useState(!1);return e.jsx("main",{className:"Page KindDeedsCreateRequestPage__main",children:e.jsx("div",{className:"padding",children:e.jsxs(u,{max:!0,align:"center",justify:"center",className:"KindDeedsCreateRequestPage__contentWrapper",children:[e.jsx("div",{id:"KindDeedsRequestCreated",style:{position:"absolute",top:X.matches?"70vh":"5vh"}}),e.jsx(O,{blocks:[{component:e.jsx(Ie,{setRequestIsCreated:s}),condition:!d,id:0},{component:e.jsx(ye,{}),condition:d,id:1}],transitionDuration:Y,defaultIndex:0})]})})})});export{yt as KindDeedsCreateRequestPage};
